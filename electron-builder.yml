appId: com.obriy.launcher
productName: Obriy Launcher
directories:
  buildResources: resources
  output: dist

files:
  - "!**/.vscode/*"
  - "!src/*"
  - "!electron.vite.config.{js,ts,mjs,cjs}"
  - "!{.eslint*,prettier*}"
  - "!README.md"
  # ВАЖЛИВО: Виключаємо engine з основного архіву, бо ми копіюємо його окремо
  - "!engine/**" 
  - out/**/*

# ВАЖЛИВО: Ця секція копіює готовий білд C# прямо в папку resources/engine
extraResources:
  - from: "engine/Obriy.Core/bin/Release/net8.0"
    to: "engine"
    filter:
      - "**/*"

# asarUnpack більше не потрібен для engine, бо ми використовуємо extraResources
asarUnpack:
  - resources/**

win:
  executableName: Obriy
  icon: build/icon.ico
  target:
    - target: nsis
      arch:
        - x64

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  perMachine: false
  shortcutName: Obriy
  deleteAppDataOnUninstall: true

mac:
  icon: build/icon.icns
  target:
    - target: dmg
      arch:
        - x64
        - arm64
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist

linux:
  icon: build/icon.png
  target:
    - AppImage

publish:
  provider: s3
  bucket: obriy-releases
  endpoint: https://9c0ee90289ee05c64c60332339e7f8ff.r2.cloudflarestorage.com
  region: auto